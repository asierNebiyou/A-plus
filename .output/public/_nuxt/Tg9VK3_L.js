import{_ as B}from"./6mNI8m8k.js";import{r as d,n as L,e as M,o as c,w as P,a as e,c as x,g as N,h as p,v as m,F as V,k as j,u as _,t as k}from"./Byu8kLTl.js";const g="/api/auth/admin";function D(){const a=d([]);return{admins:a,loadAdmins:async()=>{try{a.value=await $fetch(g)}catch(r){console.error("Error loading admins:",r)}},registerAdmin:async(r,n)=>{try{const s=await $fetch(g,{method:"POST",body:{username:r,password:n}});return a.value.push(s),s}catch(s){console.error("Error registering admin:",s)}},updateAdmin:async(r,n)=>{try{const s=await $fetch(`${g}/${r}`,{method:"PUT",body:n}),l=a.value.findIndex(i=>i.id===r);return l!==-1&&(a.value[l]=s),s}catch(s){console.error("Error updating admin:",s)}},deleteAdmin:async r=>{try{await $fetch(`${g}/${r}`,{method:"DELETE"}),a.value=a.value.filter(n=>n.id!==r)}catch(n){console.error("Error deleting admin:",n)}}}}const I={class:"max-w-3xl mx-auto p-6 bg-white rounded-xl shadow-md mt-6"},T={class:"flex gap-3 mb-6"},S={class:"overflow-x-auto bg-gray-50 rounded-lg shadow"},F={class:"min-w-full"},R={class:"py-3 px-4"},z={class:"py-3 px-4"},O={class:"py-3 px-4 flex justify-center gap-2"},q=["onClick"],G=["onClick"],H={key:0,class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50"},J={class:"bg-white p-6 rounded-lg shadow-lg w-96"},K={class:"flex justify-end gap-2"},X={__name:"users",setup(a){const{admins:y,loadAdmins:b,registerAdmin:h,updateAdmin:f,deleteAdmin:r}=D(),n=d(""),s=d(""),l=d(""),i=d(""),w=d(null),u=d(!1);L(b);const A=async()=>{await h(n.value,s.value),n.value="",s.value=""},C=v=>{w.value=v._id,l.value=v.username,i.value="",u.value=!0},E=async()=>{await f(w.value,l.value,i.value),w.value=null,u.value=!1};return(v,t)=>{const U=B;return c(),M(U,{name:"admin"},{default:P(()=>[e("div",I,[t[9]||(t[9]=e("h2",{class:"text-3xl font-semibold text-center mb-6 text-gray-800"}," Admin Management ",-1)),e("div",T,[p(e("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>n.value=o),class:"border border-gray-300 p-3 rounded-md flex-grow",placeholder:"New Username"},null,512),[[m,n.value]]),p(e("input",{"onUpdate:modelValue":t[1]||(t[1]=o=>s.value=o),type:"password",class:"border border-gray-300 p-3 rounded-md flex-grow",placeholder:"New Password"},null,512),[[m,s.value]]),e("button",{onClick:A,class:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 transition"}," Register ")]),e("div",S,[e("table",F,[t[7]||(t[7]=e("thead",null,[e("tr",{class:"bg-gray-200 text-gray-700"},[e("th",{class:"py-3 px-4 text-left"},"ID"),e("th",{class:"py-3 px-4 text-left"},"Username"),e("th",{class:"py-3 px-4 text-center"},"Actions")])],-1)),e("tbody",null,[(c(!0),x(V,null,j(_(y),o=>(c(),x("tr",{key:o._id,class:"border-t"},[e("td",R,k(o._id),1),e("td",z,k(o.username),1),e("td",O,[e("button",{onClick:$=>C(o),class:"p-2 rounded-md bg-yellow-500 hover:bg-yellow-600 transition"},t[5]||(t[5]=[e("svg",{class:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 19l-4 1 1-4L16.5 7.5a2.12 2.12 0 113 3L11 19z"})],-1)]),8,q),e("button",{onClick:$=>_(r)(o._id),class:"p-2 rounded-md bg-red-500 hover:bg-red-600 transition"},t[6]||(t[6]=[e("svg",{class:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,G)])]))),128))])])]),u.value?(c(),x("div",H,[e("div",J,[t[8]||(t[8]=e("h3",{class:"text-xl font-semibold mb-4"},"Edit Admin",-1)),p(e("input",{"onUpdate:modelValue":t[2]||(t[2]=o=>l.value=o),class:"border border-gray-300 p-3 rounded-md w-full mb-2",placeholder:"Username"},null,512),[[m,l.value]]),p(e("input",{"onUpdate:modelValue":t[3]||(t[3]=o=>i.value=o),type:"password",class:"border border-gray-300 p-3 rounded-md w-full mb-4",placeholder:"New Password (optional)"},null,512),[[m,i.value]]),e("div",K,[e("button",{onClick:E,class:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 transition"}," Update "),e("button",{onClick:t[4]||(t[4]=o=>u.value=!1),class:"bg-gray-300 px-4 py-2 rounded-md hover:bg-gray-400 transition"}," Cancel ")])])])):N("",!0)])]),_:1})}}};export{X as default};
