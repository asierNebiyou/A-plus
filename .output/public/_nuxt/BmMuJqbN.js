import{_ as C}from"./6mNI8m8k.js";import{B,r as x,n as M,e as R,o as a,w as $,a as t,c as o,g as p,h as z,v as A,t as l,u as h,F as m,k as v}from"./Byu8kLTl.js";const V={class:"p-8 min-h-screen bg-gray-100"},D={class:"max-w-5xl mx-auto bg-white shadow-xl rounded-lg p-8"},E={class:"mb-6 relative"},N={key:0,class:"mt-6 p-4 rounded-lg bg-gray-50 shadow-md"},F={class:"text-sm text-gray-700 break-all"},H=["href"],T={class:"overflow-x-auto mt-6"},U={key:0,class:"min-w-full bg-white table-auto rounded-lg shadow-xl"},Y={class:"py-4 px-6 text-sm text-gray-800"},j={class:"py-4 px-6 text-sm text-gray-600 break-all"},G=["href"],S={class:"py-4 px-6 text-sm text-gray-600"},q={class:"py-4 px-6 text-sm text-gray-600"},I={class:"py-4 px-6 flex space-x-3"},J=["onClick"],K=["onClick"],W={__name:"referrals",setup(O){const{referralData:g,generateReferral:y,loadReferrals:c,deleteReferral:w}=B(),r=x(""),n=x(""),i=x("");M(async()=>{await c(),i.value=window.location.origin});const b=async()=>{r.value&&(n.value=await y(r.value),r.value="",await c())},_=async d=>{await w(d),await c()},f=d=>{navigator.clipboard.writeText(`${i.value}?ref=${d}`),alert("Link copied to clipboard!")};return(d,e)=>{const k=C;return a(),R(k,{name:"admin"},{default:$(()=>[t("div",V,[t("div",D,[e[6]||(e[6]=t("h2",{class:"text-3xl font-semibold text-gray-900 mb-6"}," Generate Your Affiliate Link ",-1)),t("div",E,[z(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>r.value=s),type:"email",placeholder:"Enter your email",class:"w-full p-3 pr-14 text-sm rounded-lg border-2 border-gray-300 focus:outline-none focus:ring-2 focus:ring-green-500"},null,512),[[A,r.value]]),t("button",{onClick:b,class:"absolute right-2 top-1 bg-[#92A75A] text-white py-2 px-4 rounded-full hover:bg-green-600 transition-colors"},e[1]||(e[1]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[t("path",{d:"M5 12h14"}),t("path",{d:"M12 5l7 7-7 7"})],-1)]))]),n.value?(a(),o("div",N,[e[2]||(e[2]=t("h3",{class:"font-semibold text-lg text-gray-800 mb-2"}," Your Referral Link: ",-1)),t("p",F,[t("a",{href:n.value,class:"text-blue-600 hover:underline",target:"_blank"},l(n.value),9,H)])])):p("",!0),t("div",T,[h(g).length?(a(),o("table",U,[e[5]||(e[5]=t("thead",null,[t("tr",{class:"text-left border-b-2 border-gray-300 bg-gray-100"},[t("th",{class:"py-4 px-6 text-sm text-gray-700"},"Email"),t("th",{class:"py-4 px-6 text-sm text-gray-700"},"Referral Link"),t("th",{class:"py-4 px-6 text-sm text-gray-700"},"Clicks"),t("th",{class:"py-4 px-6 text-sm text-gray-700"},"Actions (Click)"),t("th",{class:"py-4 px-6 text-sm text-gray-700"},"Actions")])],-1)),t("tbody",null,[(a(!0),o(m,null,v(h(g),s=>(a(),o("tr",{key:s.code,class:"border-b border-gray-200 hover:bg-gray-50 transition-colors"},[t("td",Y,l(s.email),1),t("td",j,[t("a",{href:`${i.value}?ref=${s.code}`,class:"text-blue-500 hover:underline",target:"_blank"},l(`${i.value}?ref=${s.code}`),9,G)]),t("td",S,l(s.clicks),1),t("td",q,[(a(!0),o(m,null,v(s.actions,(u,L)=>(a(),o("p",null,l(L)+"("+l(u)+") ",1))),256))]),t("td",I,[t("button",{onClick:u=>f(s.code),class:"text-blue-600 hover:text-blue-800"},e[3]||(e[3]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 48 48"},[t("path",{d:"M 18.5 5 C 15.480226 5 13 7.4802259 13 10.5 L 13 32.5 C 13 35.519774 15.480226 38 18.5 38 L 34.5 38 C 37.519774 38 40 35.519774 40 32.5 L 40 10.5 C 40 7.4802259 37.519774 5 34.5 5 L 18.5 5 z M 18.5 8 L 34.5 8 C 35.898226 8 37 9.1017741 37 10.5 L 37 32.5 C 37 33.898226 35.898226 35 34.5 35 L 18.5 35 C 17.101774 35 16 33.898226 16 32.5 L 16 10.5 C 16 9.1017741 17.101774 8 18.5 8 z M 11 10 L 9.78125 10.8125 C 8.66825 11.5545 8 12.803625 8 14.140625 L 8 33.5 C 8 38.747 12.253 43 17.5 43 L 30.859375 43 C 32.197375 43 33.4465 42.33175 34.1875 41.21875 L 35 40 L 17.5 40 C 13.91 40 11 37.09 11 33.5 L 11 10 z"})],-1)]),8,J),t("button",{onClick:u=>_(s._id)},e[4]||(e[4]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24"},[t("path",{fill:"red",d:"M10 2l-1 1H3v2h18V3h-6l-1-1zm-4.635 5l1.527 13.264c.132.99.984 1.736 1.982 1.736h8.248c.998 0 1.851-.745 1.984-1.744L18.365 7H5.365z"})],-1)]),8,K)])]))),128))])])):p("",!0)])])])]),_:1})}}};export{W as default};
