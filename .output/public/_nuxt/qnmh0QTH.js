import{_ as j}from"./6mNI8m8k.js";import{r as h,q as F,f as b,e as M,o as l,w as q,a as e,c as d,g as c,h as w,v as A,s as D,u as r,t as n,F as E,k as U}from"./Byu8kLTl.js";import{u as z}from"./Bse9wqYS.js";const Q={class:"p-6 bg-white shadow rounded-lg"},R={class:"flex flex-col md:flex-row gap-4 mb-4 justify-between"},T={key:0,class:"text-red-500"},G={key:1,class:"text-gray-500"},H={key:2},I={class:"w-full border-collapse border border-gray-200"},J={class:"border p-2"},K={class:"border p-2"},O={class:"border p-2"},W={class:"border p-2"},X={class:"border p-2"},Y=["value","onChange"],Z={class:"flex justify-between items-center mt-4"},$=["disabled"],ee=["disabled"],te={key:3,class:"text-gray-500"},g=5,ne={__name:"consultation",async setup(se){let y,f;const{consultations:S,loadConsultations:k,updateConsultation:P,loading:i,error:C}=z(),p=h(""),u=h(""),o=h(1);[y,f]=F(()=>k()),await y,f();const x=b(()=>S.value.filter(a=>{const t=[a.name,a.email,a.phone].join(" ").toLowerCase().includes(p.value.toLowerCase()),_=u.value?a.status===u.value:!0;return t&&_})),v=b(()=>{const a=(o.value-1)*g;return x.value.slice(a,a+g)}),N=async(a,t)=>{await P(a,{status:t})},m=b(()=>Math.ceil(x.value.length/g)),L=()=>{o.value<m.value&&o.value++},B=()=>{o.value>1&&o.value--};return(a,t)=>{const _=j;return l(),M(_,{name:"admin"},{default:q(()=>[e("div",Q,[t[5]||(t[5]=e("h2",{class:"text-2xl font-semibold mb-4"},"Consultation Requests",-1)),e("div",R,[w(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>p.value=s),type:"text",placeholder:"Search by name, email, or phone",class:"w-full md:w-1/2 p-2 border rounded-md"},null,512),[[A,p.value]]),w(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>u.value=s),class:"w-full md:w-1/4 p-2 border rounded-md"},t[2]||(t[2]=[e("option",{value:""},"All Statuses",-1),e("option",{value:"pending"},"Pending",-1),e("option",{value:"contacted"},"Contacted",-1),e("option",{value:"scheduled"},"Scheduled",-1),e("option",{value:"completed"},"Completed",-1),e("option",{value:"cancelled"},"Cancelled",-1)]),512),[[D,u.value]])]),r(C)?(l(),d("p",T,n(r(C)),1)):c("",!0),r(i)?(l(),d("p",G,"Loading ...")):c("",!0),!r(i)&&v.value.length>0?(l(),d("div",H,[e("table",I,[t[4]||(t[4]=e("thead",{class:"bg-gray-100"},[e("tr",null,[e("th",{class:"border p-2"},"Name"),e("th",{class:"border p-2"},"Email"),e("th",{class:"border p-2"},"Phone"),e("th",{class:"border p-2"},"Source"),e("th",{class:"border p-2"},"Status")])],-1)),e("tbody",null,[(l(!0),d(E,null,U(v.value,s=>(l(),d("tr",{key:s._id,class:"hover:bg-gray-50"},[e("td",J,n(s.name),1),e("td",K,n(s.email),1),e("td",O,n(s.phone),1),e("td",W,n(s.source),1),e("td",X,[e("select",{value:s.status,onChange:V=>N(s._id,V.target.value),class:"border rounded p-1"},t[3]||(t[3]=[e("option",{value:"pending"},"Pending",-1),e("option",{value:"contacted"},"Contacted",-1),e("option",{value:"scheduled"},"Scheduled",-1),e("option",{value:"completed"},"Completed",-1),e("option",{value:"cancelled"},"Cancelled",-1)]),40,Y)])]))),128))])]),e("div",Z,[e("button",{onClick:B,disabled:o.value===1,class:"px-4 py-2 bg-gray-200 rounded disabled:opacity-50"}," Previous ",8,$),e("span",null,"Page "+n(o.value)+" of "+n(m.value),1),e("button",{onClick:L,disabled:o.value===m.value,class:"px-4 py-2 bg-gray-200 rounded disabled:opacity-50"}," Next ",8,ee)])])):c("",!0),!r(i)&&v.value.length===0?(l(),d("p",te," No consultations found. ")):c("",!0)])]),_:1})}}};export{ne as default};
